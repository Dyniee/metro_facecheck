{% extends "base.html" %}


{% block title %}Trang Ch·ªß - Metro FaceCheck{% endblock %}

{% block extra_css %}<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">{% endblock %}

{% block content %}
<div class="page-container">
    {% if not session.get('user') %}
        <!-- Unauthenticated Homepage -->
       
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">Ki·ªÉm So√°t Khu√¥n M·∫∑t Th√¥ng Minh</h1>
                <p class="hero-subtitle">C√¥ng ngh·ªá nh√¢n di·ªán nhanh ch√≥ng, an to√†n, ti·ªán l·ª£i</p>
                <p class="hero-description">
                    Metro FaceCheck s·ª≠ d·ª•ng c√¥ng ngh·ªá nh√¢n di·ªán khu√¥n m·∫∑t h√†ng ƒë·∫ßu ƒë·ªÉ ki·ªÉm so√°t v√© metro c·ªßa b·∫°n.
                    V√†o v√† ra ga m·ªôt c√°ch nhanh ch√≥ng ch·ªâ b·∫±ng n√©t m·∫∑t c·ªßa b·∫°n.
                </p>
                <div class="hero-actions">
                    <a href="/register" class="btn btn-primary btn-lg">B·∫Øt ƒê·∫ßu</a>
                    <a href="#features" class="btn btn-secondary btn-lg">T√¨m Hi·ªÉu Th√™m</a>
                </div>
            </div>
            <div class="hero-visual">
                <div class="hero-icon">üîê</div>
            </div>
        </section>


        <!-- Add public check-in button before features section -->
        <section style="text-align: center; padding: 2rem 1rem; background: linear-gradient(135deg, #fff4e6 0%, #ffe6e6 100%); border-radius: 1rem; margin: 3rem 0;">
            <h2 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Ki·ªÉm So√°t V√†o Ga</h2>
            <p style="font-size: 1rem; color: #666; margin-bottom: 1.5rem;">B·∫°n ƒë√£ c√≥ v√©? Nh·∫•p v√†o n√∫t d∆∞·ªõi ƒë·ªÉ ki·ªÉm so√°t khu√¥n m·∫∑t v√†o ga.</p>
            <a href="/checkin" class="btn btn-primary btn-lg">Ki·ªÉm So√°t V√†o Ga Ngay</a>
        </section>


        <!-- Features Section -->
        <section class="features" id="features">
            <h2>T√≠nh NƒÉng N·ªïi B·∫≠t</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>C·ª±c K·ª≥ Nhanh Ch√≥ng</h3>
                    <p>Ki·ªÉm so√°t trong v√≤ng 1 gi√¢y. Kh√¥ng c·∫ßn t√¨m v√©, kh√¥ng c·∫ßn qu·∫πt th·∫ª.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîê</div>
                    <h3>B·∫£o M·∫≠t Cao</h3>
                    <p>C√¥ng ngh·ªá m√£ h√≥a ti√™n ti·∫øn b·∫£o v·ªá d·ªØ li·ªáu khu√¥n m·∫∑t c·ªßa b·∫°n 24/7.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3>D·ªÖ D√†ng S·ª≠ D·ª•ng</h3>
                    <p>Giao di·ªán th√¢n thi·ªán, ch·ªâ c·∫ßn ƒëƒÉng k√Ω m·ªôt l·∫ßn v√† b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üéüÔ∏è</div>
                    <h3>V√© Th√°ng Ti·ªán L·ª£i</h3>
                    <p>V√© th√°ng 30 ng√†y s·ª≠ d·ª•ng kh√¥ng gi·ªõi h·∫°n v·ªõi gi√° 500.000 VNƒê.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚úÖ</div>
                    <h3>ƒê·ªô Ch√≠nh X√°c Cao</h3>
                    <p>Nh√¢n di·ªán ch√≠nh x√°c 99.9%, ho·∫°t ƒë·ªông t·ªët trong m·ªçi ƒëi·ªÅu ki·ªán.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üåç</div>
                    <h3>To√†n B·ªô M·∫°ng L∆∞·ªõi</h3>
                    <p>S·ª≠ d·ª•ng tr√™n to√†n b·ªô 6 ga metro v·ªõi c∆° s·ªü h·∫° t·∫ßng ho√†n ch·ªânh.</p>
                </div>
            </div>
        </section>


        <!-- Steps Section -->
        <section class="info-section">
            <div class="info-box">
                <h3>C√°ch S·ª≠ D·ª•ng C·ª±c K·ª≥ ƒê∆°n Gi·∫£n - 3 B∆∞·ªõc</h3>
                <ol class="steps">
                    <li><strong>ƒêƒÉng K√Ω & Mua V√©:</strong> ƒêƒÉng k√Ω t√†i kho·∫£n, ch·ªçn v√© th√°ng v√† thanh to√°n</li>
                    <li><strong>ƒêƒÉng K√Ω Khu√¥n M·∫∑t:</strong> T·∫£i l√™n ho·∫∑c ch·ª•p ·∫£nh khu√¥n m·∫∑t c·ªßa b·∫°n</li>
                    <li><strong>Ki·ªÉm So√°t V√†o:</strong> ƒê·∫∑t khu√¥n m·∫∑t v√†o camera t·∫°i ga, c·ªïng t·ª± ƒë·ªông m·ªü!</li>
                </ol>
            </div>
        </section>


        <!-- Stats Section -->
        <section class="info-section">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 2rem; text-align: center;">
                <div>
                    <div style="font-size: 2.5rem; font-weight: 700; color: #0066cc;">100K+</div>
                    <p style="color: #666; margin-top: 0.5rem;">Ng∆∞·ªùi D√πng H√†ng Ng√†y</p>
                </div>
                <div>
                    <div style="font-size: 2.5rem; font-weight: 700; color: #0066cc;">1M+</div>
                    <p style="color: #666; margin-top: 0.5rem;">L∆∞·ª£t Ki·ªÉm So√°t</p>
                </div>
                <div>
                    <div style="font-size: 2.5rem; font-weight: 700; color: #0066cc;">6</div>
                    <p style="color: #666; margin-top: 0.5rem;">Ga Metro</p>
                </div>
                <div>
                    <div style="font-size: 2.5rem; font-weight: 700; color: #0066cc;">99.9%</div>
                    <p style="color: #666; margin-top: 0.5rem;">ƒê·ªô Ch√≠nh X√°c</p>
                </div>
            </div>
        </section>


        <!-- CTA Section -->
        <section class="contact-section">
            <div class="contact-content">
                <h2>B·∫Øt ƒë·∫ßu ngay h√¥m nay</h2>
                <p>ƒêƒÉng k√Ω t√†i kho·∫£n v√† tr·∫£i nghi·ªám t∆∞∆°ng lai c·ªßa giao th√¥ng c√¥ng c·ªông. Ch·ªâ m·∫•t 2 ph√∫t ƒë·ªÉ thi·∫øt l·∫≠p.</p>
                <form action="/register" method="GET" class="contact-form">
                    <input type="email" name="email" placeholder="Nh·∫≠p email c·ªßa b·∫°n..." required>
                    <button type="submit" class="btn">ƒêƒÉng k√Ω</button>
                </form>
            </div>
        </section>


    {% else %}
        <!-- Authenticated Homepage -->
        <div class="page-header">
            <h2>Ch√†o m·ª´ng, {{ session['user']['username'] }}</h2>
            <p>Qu·∫£n l√Ω v√© metro c·ªßa b·∫°n</p>
        </div>


        <!-- Quick Actions -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
            <a href="/buy_ticket" class="feature-card" style="text-decoration: none; cursor: pointer;">
                <div class="feature-icon">üéüÔ∏è</div>
                <h3>Mua V√© Th√°ng</h3>
                <p>Mua v√© th√°ng 30 ng√†y s·ª≠ d·ª•ng kh√¥ng gi·ªõi h·∫°n.</p>
            </a>
            <a href="/upload_face" class="feature-card" style="text-decoration: none; cursor: pointer;">
                <div class="feature-icon">üì∏</div>
                <h3>ƒêƒÉng K√Ω Khu√¥n M·∫∑t</h3>
                <p>T·∫£i l√™n ho·∫∑c ch·ª•p ·∫£nh khu√¥n m·∫∑t c·ªßa b·∫°n ƒë·ªÉ ki·ªÉm so√°t.</p>
            </a>
            <!-- Remove check-in from authenticated dashboard (moved to public) -->
            <a href="/history" class="feature-card" style="text-decoration: none; cursor: pointer;">
                <div class="feature-icon">üìã</div>
                <h3>L·ªãch S·ª≠ V√©</h3>
                <p>Xem danh s√°ch t·∫•t c·∫£ c√°c v√© ƒë√£ mua.</p>
            </a>
        </div>


        <!-- User Info -->
        <section class="info-section" style="margin-top: 2rem;">
            <div style="background: var(--white); border: 1px solid var(--gray-light); border-radius: 0.75rem; padding: 1.5rem;">
                <h3 style="margin-bottom: 1rem;">Th√¥ng Tin T√†i Kho·∫£n</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <div>
                        <p style="color: #666; font-size: 0.9rem;">T√™n ƒëƒÉng nh·∫≠p</p>
                        <p style="font-weight: 600;">{{ session['user']['username'] }}</p>
                    </div>
                    <div>
                        <p style="color: #666; font-size: 0.9rem;">Email</p>
                        <p style="font-weight: 600;">{{ session['user']['email'] }}</p>
                    </div>
                    <div>
                        <p style="color: #666; font-size: 0.9rem;">S·ªë ƒëi·ªán tho·∫°i</p>
                        <p style="font-weight: 600;">{{ session['user']['phone'] }}</p>
                    </div>
                    <div>
                        <p style="color: #666; font-size: 0.9rem;">Vai tr√≤</p>
                        <p style="font-weight: 600;">
                            {% if session['user']['role'] == 'admin' %}
                                <span class="badge badge-primary">Qu·∫£n Tr·ªã Vi√™n</span>
                            {% else %}
                                <span class="badge badge-secondary">Ng∆∞·ªùi D√πng</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}
</div>
{% endblock %}






